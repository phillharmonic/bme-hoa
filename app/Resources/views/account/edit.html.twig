{# empty Twig template #}
{# src/MainBundle/Resources/views/Account/edit.html.twig #}
{% extends 'MainBundle::layout.html.twig' %}
{% block stylesheets %}
    {{ parent() }}<link href="{{ asset('bundles/main/css/forms.css') }}" type="text/css" rel="stylesheet" />
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script type="text/javascript" src="{{ asset('bundles/main/js/form.js') }}"></script>
    <script type="text/javascript" src="{{ asset('bundles/main/js/add_delete.js') }}"></script>
{% endblock %}
{% block sidebar %}
    {% render controller("MainBundle:Sidebar:account") %}
{% endblock %}
{% block title %}Edit Profile{% endblock %}
{% block body %}    
{% form_theme form 'form/fields.html.twig' %}
        <div class="section-header"><h1>Account</h1></div>
        
        <form action="{{ path('MainBundle_Account_Edit', {'id' : user.id}) }}" method="post" {{ form_enctype(form) }} class="user">
        {# {{ form_widget(form) }} #}
        {{ form_errors(form) }}
        <div class="section-header"><h6>Edit Profile</h6></div>
            {{ form_row(form.honorific) }}
            {{ form_row(form.firstname) }}
            {{ form_row(form.mi) }}
            {{ form_row(form.lastname) }}
            {{ form_row(form.username) }}
            {{ form_row(form.email) }} 
            {{ form_row(form.gender) }}
            <div class='dates'>{{ form_row(form.bday) }}</div>
            {{ form_row(form.marital_status) }}
            {{ form_row(form.housenumber) }}
            {{ form_row(form.street) }}
            {{ form_row(form.homephone) }}
            {{ form_row(form.cellphone) }}
            {{ form_row(form.occupation) }}
            <div class='dates'>{{ form_row(form.occupy_date) }}</div>
            
            <div class="section-header"><h6>Pictures</h6></div>
            {#  data-prototype becomes available after adding the 'allow-add' option in the collection builder 
                of the form.  This "prototype" is a little "template" that contains all the HTML to be able to 
                render any new "photo" forms: #}
            <div class="images" data-prototype="{{ form_widget(form.photos.vars.prototype)|e }}">
                {# iterate over each existing tag and render its only field: description #}
                {% for picture in form.photos %}
                    <section>
                        {{ form_row(picture.name) }}
                        {{ form_row(picture.description) }}
                        {{ form_row(picture.path, { 'attr': {'class': 'img_path'} }) }}
                    </section>
                {% endfor %}
            </div>
            
            {{ form_rest(form) }}
            <input type="submit" value="Submit" />
        </form>
        
{% endblock %}